<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">

<head profile="http://gmpg.org/xfn/11">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title> f(x)=x</title>

	<link rel="stylesheet" href="../../wp-content/themes/chaoticsoul-modified/style.css" type="text/css" media="screen" />
	<!--[if IE]>
	<link rel="stylesheet" href="https://chrissalch.com/wp-content/themes/chaoticsoul-modified/ie.css" type="text/css" media="screen" />
	<![endif]-->
	<link rel="alternate" type="application/rss+xml" title="f(x)=x RSS Feed" href="../../feed/index.html" />
	<link rel="pingback" href="https://chrissalch.com/xmlrpc.php" />

	<link rel='dns-prefetch' href='https://s0.wp.com/' />
<link rel='dns-prefetch' href='https://s.w.org/' />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/12.0.0-1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/12.0.0-1\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/chrissalch.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.2.7"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55357,56424,55356,57342,8205,55358,56605,8205,55357,56424,55356,57340],[55357,56424,55356,57342,8203,55358,56605,8203,55357,56424,55356,57340]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='wp-block-library-css'  href='../../wp-includes/css/dist/block-library/style.min.css?ver=5.2.7' type='text/css' media='all' />
<link rel='stylesheet' id='jetpack_css-css'  href='../../wp-content/plugins/jetpack/css/jetpack.css?ver=7.8.1' type='text/css' media='all' />
<script type='text/javascript' src='../../wp-includes/js/jquery/jquery.js?ver=1.12.4-wp'></script>
<script type='text/javascript' src='../../wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<link rel='https://api.w.org/' href='../../wp-json/index.html' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 5.2.7" />
<link rel='shortlink' href='https://wp.me/2wO29' />

<link rel='dns-prefetch' href='https://v0.wordpress.com/'/>
			<style type="text/css" id="wp-custom-css">
				/*
You can add your own CSS here.

Click the help icon above to learn more.
*/

.book {
	margin-right: 5px;
}			</style>
		</head>
<body>
<div id="page">


<div id="header">
	<h1><a href="../../index.html">f(x)=x</a></h1>
	<div class="description">The identity function</div>

    <!-- <div class="hr">&nbsp;</div> --> <!-- because IE sucks at styling HRs -->

    <div id="headerimg" class="clearfix">
	    <div id="header-image">
            <div class="hr">&nbsp;</div>
            <img alt="header image" src="../../wp-content/uploads/2017/01/cropped-CampingAtSunSetHeader.jpeg" />
        </div>
    </div>

    <div class="hr">&nbsp;</div>
</div>


<div id="wrapper" class="clearfix">
	
	<div id="content" class="narrowcolumn">
	
		
		<!-- First Post -->
											
		<!-- Next few posts -->
			
		
			<div class="post lastfive" id="post-53">
				<h2><a href="../../blog/2012/02/08/editing/index.html" rel="bookmark" title="Permanent Link to Editing">Editing</a></h2>
				<span class="postmetadata">&nbsp;February 8, 2012 &bull; <a href="../../blog/2012/02/08/editing/index.html#respond">No Comments</a> </span>				   
				<div class="entry">
					<p>Editing can turn into a painful process. A friend of mine has been gracious enough to read through <em><a href="http://www.amazon.com/That-Which-is-Nameless-ebook/dp/B005GBEHG6/" target="_blank">That Which is Nameless</a></em> and provide some much needed proof reading. In the mean time, I&#8217;ll be working <em><a title="The Empty" href="../../index.html?p=13" target="_blank">The Empty</a></em> as I find time and perhaps a new cover for the book.  That orange monstrosity I came up with while playing with the <em><a href="http://www.gimp.org" target="_blank">Gimp</a></em> is not really all that appealing.</p>
					<p class="postmetadata">
						Posted in <a href="../../blog/category/writings-fiction/that-which-is-nameless/index.html" rel="category tag">That Which is Nameless</a>											</p>
				</div>
			</div>
			
			
		
			<div class="post lastfive" id="post-46">
				<h2><a href="../../blog/2012/01/27/obsession-and-paranoia/index.html" rel="bookmark" title="Permanent Link to Obsession and Paranoia">Obsession and Paranoia</a></h2>
				<span class="postmetadata">&nbsp;January 27, 2012 &bull; <a href="../../blog/2012/01/27/obsession-and-paranoia/index.html#respond">No Comments</a> </span>				   
				<div class="entry">
					<p>Over the course of the last few weeks <em><a href="http://www.amazon.com/That-Which-is-Nameless-ebook/dp/B005GBEHG6/" target="_blank">That Which is Nameless</a></em> has been downloaded by quite a few people.  The last time I checked, 542 in the US, 67 in the UK, and one person in Germany had downloaded the book.  That would mean that 610 people have something I wrote sitting on their devices in the process of being read or waiting for them to get around to it.  From my own personal experience with a kindle, I know that it sometimes takes quite a while to get around to reading something that caught your eye.  Heck, I still have quite a few books around the house that were purchased because they looked interesting but haven&#8217;t been read yet.</p>
<p>Someday, I&#8217;ll get around to reading them and, if all goes well, I&#8217;ll actually find them as interesting as they looked.  Of course, once I&#8217;ve read those books that&#8217;s it.  There is no means for me to provide feed back to the author about what I liked and what I didn&#8217;t.  I could always write a blog entry about them or tweet some about them.  Truthfully, though, what are the chances that any given author is actually going to notice my comments?</p>
<p>That is one of the things I <strong>think</strong> I&#8217;m going to like about publishing on the kindle.  I say think because, so far, there is only one review of <em><a href="http://www.amazon.com/That-Which-is-Nameless-ebook/dp/B005GBEHG6/" target="_blank">That Which is Nameless</a></em>.  So here I find myself obsessively checking the <a href="https://kdp.amazon.com/" target="_blank">KDP</a> reports page and the books page looking for any updates with nothing happening.  Which, is expected I guess.</p>
<p>As an author, I&#8217;m effectively a no name.  I&#8217;ll accept that my book is probably nowhere near the top of anyone&#8217;s reading list either.  Still, can I get a review or comment?</p>
					<p class="postmetadata">
						Posted in <a href="../../blog/category/writings-fiction/that-which-is-nameless/index.html" rel="category tag">That Which is Nameless</a>, <a href="../../blog/category/writings-fiction/index.html" rel="category tag">Writings - Fiction</a>											</p>
				</div>
			</div>
			
			
		
			<div class="post lastfive" id="post-22">
				<h2><a href="../../blog/2012/01/21/strange-numbers/index.html" rel="bookmark" title="Permanent Link to Strange Numbers">Strange Numbers</a></h2>
				<span class="postmetadata">&nbsp;January 21, 2012 &bull; <a href="../../blog/2012/01/21/strange-numbers/index.html#respond">No Comments</a> </span>				   
				<div class="entry">
					<p>I&#8217;ll have more on <a href="../../index.html?p=13" title="The Empty"> The Empty</a> a little latter.  This little Gem took so much to figure out that I had to write it up.</p>
<p>I&#8217;ve been working on a data extraction/conversion project for a friend of mine and ran into a problem dealing with something that looked like a floating point number. C might have been a reasonable choice, but would likely have cost me time while I am figuring out how the data records are actually stored. Perl has this nifty little command called <a href="http://perldoc.perl.org/functions/pack.html">pack</a> that makes pulling data out of binary blocks relatively easy. Besides, its a great deal easier to work with a script that doesn&#8217;t segfault every time you get things just a little off.</p>
<p>The particular piece of software in question was written around the mid 80s to 90s era. From what I&#8217;ve been able to determine it uses some form of flat file database that is highly reminiscent of a C style struct. The file layout is based on fixed sized blocks. A file header, that I have yet to fully decode, occupies the first few blocks of the file, depending on the block size. This means that you have to skip a certain number of blocks that are clobbered by the header record at the start of the file to find the first data block. So far, I&#8217;ve been able to identify a couple of integer formats, a fixed length string format, a single character field, and the villain of this story, a decimal number field. I call it a villain because this thing has turned out to be a bear to extract. Everything I tried failed me until tonight, when I finally figured it out and nearly kicked myself at how simple it actually was.</p>
<p>Using <a href="http://en.wikipedia.org/wiki/Od_(Unix)">od</a> with a carefully selected range I was able to identify a four byte chunk of data in a record that appeared to correspond to the decimal field in the front end. Since I had a working copy the front end available, finding the field by modifying a record and seeing what changed was easy enough. First I gave the &#8216;f&#8217; option in pack a try and received wildly varying numbers from data displayed in the original application. The &#8216;f&#8217; option should have been correct to decode a 32bit <a href="http://babbage.cs.qc.edu/IEEE-754/">IEEE-754</a> floating point number. From my understanding, if I was looking at a native floating point number then <a href="http://babbage.cs.qc.edu/IEEE-754/">IEEE754</a> should have been what to expect.</p>
<p>Unfortunately, there was no way that the bytes could be arranged to come anywhere near a <a href="http://babbage.cs.qc.edu/IEEE-754/">IEEE754</a> number. Given how the front end was layed out, I knew that the field was designed to contain a value between 99999.99 and 0.00. It would always display two decimal digits and always max out with 5 digits to the left of the decimal point. If it wasn&#8217;t encoded as a floating point number, maybe they had used an integer to encoded it a as a fixed point value? I tried using &#8216;V&#8217; from <a href="http://perldoc.perl.org/functions/pack.html">pack</a> with similar results to what I had seen when treating the field as a float.</p>
<p>Just to be thorough, I also tried a few variations of byte order and a trick that had been used to encode block sizes, using to 16bit numbers to store the value rather than a single 32bit number. In the file header, the size of a data block was stored using two little endian 16bit values arranged in the wrong order to decode as a little endian 32bit number. To decode the value, you had to pull out the two 16bit numbers using <a href="http://perldoc.perl.org/functions/pack.html">pack&#8217;s</a> &#8216;v&#8217; option, multiply the high order word by 0x10000, and add them together. No joy there.</p>
<p>Ok, so maybe what this was some sort of encoded number, say <a href="http://en.wikipedia.org/wiki/Binary-coded_decimal">BCD</a>? If it had been encoded using <a href="http://en.wikipedia.org/wiki/Binary-coded_decimal">BCD</a> then there should have been just enough bits to store 8 digits in an 8bit number. Each byte would contain 2 digits, one in the high nibble (4bits) and the other in the low nibble. More over, if 0x00000000 were 0 then 0x00000001 should have been 0.01 and 0.10 would have been 0x00000010. I gave it a try and immediately concluded that <a href="http://en.wikipedia.org/wiki/Binary-coded_decimal">BCD</a> was not he encoding being used. 0.01 came out as 0x00000004 instead and 0.10 came out as 0x0000002D.</p>
<p>Somewhere in here, I think my head exploded. Having data that made absolutely no sense with anything that seemed remotely plausible, I set to get a sample of values and their encodings for comparison. That lead me to the following:</p>
<table>
<tr>
<th>Value</th>
<th>Encoded</th>
<th>Step</th>
</tr>
<tr>
<td>0.00</td>
<td>00</td>
<td>4</td>
</td>
<tr>
<td>0.01</td>
<td>04</td>
<td>5</td>
</td>
<tr>
<td>0.02</td>
<td>09</td>
<td>4</td>
</td>
<tr>
<td>0.03</td>
<td>0d</td>
<td>5</td>
</td>
<tr>
<td>0.04</td>
<td>12</td>
<td>4</td>
</td>
<tr>
<td>0.05</td>
<td>16</td>
<td>5</td>
</td>
<tr>
<td>0.06</td>
<td>1b</td>
<td>4</td>
</td>
<tr>
<td>0.07</td>
<td>1f</td>
<td>5</td>
</td>
<tr>
<td>0.08</td>
<td>24</td>
<td>4</td>
</td>
<tr>
<td>0.09</td>
<td>28</td>
<td>5</td>
</td>
<tr>
<td>0.1</td>
<td>2d</td>
<td>4</td>
</td>
<tr>
<td>0.11</td>
<td>31</td>
<td>5</td>
</td>
<tr>
<td>0.12</td>
<td>36</td>
<td>4</td>
</td>
<tr>
<td>0.13</td>
<td>3a</td>
<td>5</td>
</td>
<tr>
<td>0.14</td>
<td>3f</td>
<td>5</td>
</td>
<tr>
<td>0.15</td>
<td>44</td>
<td>4</td>
</td>
<tr>
<td>0.16</td>
<td>48</td>
<td>5</td>
</td>
<tr>
<td>0.17</td>
<td>4d</td>
<td>4</td>
</td>
<tr>
<td>0.18</td>
<td>51</td>
<td>5</td>
</td>
<tr>
<td>0.19</td>
<td>56</td>
<td>4</td>
</td>
<tr>
<td>0.2</td>
<td>5A</td>
<td>5</td>
</td>
<tr>
<td>0.21</td>
<td>5F</td>
<td>4</td>
</td>
<tr>
<td>0.22</td>
<td>63</td>
<td>5</td>
</td>
<tr>
<td>0.23</td>
<td>68</td>
<td>4</td>
</td>
<tr>
<td>0.24</td>
<td>6C</td>
<td>5</td>
</td>
<tr>
<td>0.25</td>
<td>71</td>
<td>4</td>
</td>
<tr>
<td>0.26</td>
<td>75</td>
<td>5</td>
</td>
<tr>
<td>0.27</td>
<td>7A</td>
<td>5</td>
</td>
<tr>
<td>0.28</td>
<td>7F</td>
<td>4</td>
</td>
<tr>
<td>0.29</td>
<td>83</td>
<td>5</td>
</td>
<tr>
<td>0.3</td>
<td>88</td>
<td>4</td>
</td>
<tr>
<td>0.31</td>
<td>8C</td>
<td>5</td>
</td>
<tr>
<td>0.32</td>
<td>91</td>
<td>4</td>
</td>
<tr>
<td>0.33</td>
<td>95</td>
<td>5</td>
</td>
<tr>
<td>0.34</td>
<td>9A</td>
<td>4</td>
</td>
<tr>
<td>0.35</td>
<td>9E</td>
<td>5</td>
</td>
<tr>
<td>0.36</td>
<td>A3</td>
<td>4</td>
</td>
<tr>
<td>0.37</td>
<td>A7</td>
<td>5</td>
</td>
<tr>
<td>0.38</td>
<td>AC</td>
<td>4</td>
</td>
<tr>
<td>0.39</td>
<td>b0</td>
<td>5</td>
</td>
<tr>
<td>0.40</td>
<td>b5</td>
<td>4</td>
</td>
<tr>
<td>0.41</td>
<td>b9</td>
<td>5</td>
</td>
<tr>
<td>0.42</td>
<td>be</td>
<td>5</td>
</td>
<tr>
<td>0.43</td>
<td>c3</td>
<td>4</td>
</td>
<tr>
<td>0.44</td>
<td>c7</td>
<td>5</td>
</td>
<tr>
<td>0.45</td>
<td>cc</td>
<td>4</td>
</td>
<tr>
<td>0.46</td>
<td>d0</td>
<td>5</td>
</td>
<tr>
<td>0.47</td>
<td>d5</td>
<td>4</td>
</td>
<tr>
<td>0.48</td>
<td>d9</td>
<td>5</td>
</td>
<tr>
<td>0.49</td>
<td>de</td>
<td>4</td>
</td>
<tr>
<td>0.5</td>
<td>e2</td>
<td>5</td>
</td>
<tr>
<td>0.51</td>
<td>e7</td>
<td>4</td>
</td>
<tr>
<td>0.52</td>
<td>eb</td>
<td>5</td>
</td>
<tr>
<td>0.53</td>
<td>f0</td>
<td>4</td>
</td>
<tr>
<td>0.54</td>
<td>f4</td>
<td>5</td>
</td>
<tr>
<td>0.55</td>
<td>f9</td>
<td>4</td>
</td>
<tr>
<td>0.56</td>
<td>fe</td>
<td>*</td>
</td>
</table>
<p>The first thing to notice here is the step column.  It represents the difference between the value on that row and the one right after it.  If you don&#8217;t look too closely, the encoded values look like they have an alternating step between 4 and 5.  At first glance, you should be able take the encoded value for any number in this sequence and get a 4 or 5 from the that value mod 9.  I pulled up <a href="http://en.wikipedia.org/wiki/Dc_(Unix)">dc</a> and gave it a shot with the value for 0.56:</p>
<pre>
$ dc
16 i FE 9 % p
2
</pre>
<p>This result meant that somewhere in the list it was doubling up with either to 5&#8217;s steps or two for steps&#8217;s happening right next to each other.  If you look closely at the table, you&#8217;ll see that 0.26 and 0.27 ( along with a couple of other values) do indeed have a step of 5 one right after the other.</p>
<p>It didn&#8217;t hit me until a latter that I had seen a sequence of numbers like this one before.  A long time ago, when the only programming language I knew was <a href="http://www.google.com/search?sourceid=chrome&#038;ie=UTF-8&#038;q=GW+Basic">BASIC</a>, I wrote a little program to draw lines, pixel by pixel on the screen.  Of course, raster displays cannot display a completely clean line by their very nature, they always have a touch of stair step on any line that is not purely vertical or horizontal. If the slope of your line is not an integer value, then the individual line segments that make up a line could easily have lengths in the longer axis like these.</p>
<p>On a hunch, I took the highest number that could be displayed in the front end 99999.99 and rounded up to 100000.00 to make a clean number and setup a ratio with the encoded value for that number.  The rounding decision was purely arbitrary, though it seemed to work out ok in the end.  The net result, after reducing by common factors,  was the fraction 1000/4536.  Surprisingly, this worked.  I tested several conversions, calculating out what the result should going from a decimal to the encoded value and an encoded value to a decimal an every case I checked came out correct.  I coded it up in perl and ran a test extraction. IT WORKED!</p>
<p>It looks like whoever designed the application used that ratio to map the range of 0-100000.00 to a set of integer values.  Figuring this one out had me giddy for the rest of the evening.  Now if only I could crack the date format . . . . .</p>
					<p class="postmetadata">
						Posted in <a href="../../blog/category/programming/index.html" rel="category tag">Programming</a>, <a href="../../blog/category/programming/software-archaeology/index.html" rel="category tag">Software Archaeology</a>											</p>
				</div>
			</div>
			
			
		
			<div class="post lastfive" id="post-13">
				<h2><a href="../../index.html?p=13" rel="bookmark" title="Permanent Link to The Empty">The Empty</a></h2>
				<span class="postmetadata">&nbsp;January 13, 2012 &bull; <a href="../../index.html?p=13#respond">No Comments</a> </span>				   
				<div class="entry">
					<p>I&#8217;ve started work on a follow up book to the <em><a title="That Which is Nameless" href="http://www.amazon.com/That-Which-is-Nameless-ebook/dp/B005GBEHG6/" target="_blank">That Which is Nameless</a>.</em>  My current working title for the book is  <em>The Empty</em>.  I had hoped to work through the text during <a title="National Novel Writing Month" href="http://www.nanowrimo.org/" target="_blank">NaNoWrimo</a> in December of last year.  Unfortunately, life and the day job conspired against me on that front.  So, I&#8217;m working through things at a slightly slower, but hopefully reasonably consistent pace.  Right now, I have about 2870 words committed to the git repository I have the novel in.  Not sure what I&#8217;m going to do for a cover just yet though.   The one for <em><a title="That Which is Nameless" href="http://www.amazon.com/That-Which-is-Nameless-ebook/dp/B005GBEHG6/" target="_blank">That Which is Nameless</a></em> is a little on the garish side, I&#8217;ll be trying for something a little better this time around.  I may have to release an updated version to <em><a title="That Which is Nameless" href="http://www.amazon.com/That-Which-is-Nameless-ebook/dp/B005GBEHG6/" target="_blank">That Which is Nameless</a> </em>with a better cover after I finish <em>The Empty.</em></p>
					<p class="postmetadata">
						Posted in <a href="../../blog/category/writings-fiction/the-empty/index.html" rel="category tag">The Empty</a>, <a href="../../blog/category/writings-fiction/index.html" rel="category tag">Writings - Fiction</a>											</p>
				</div>
			</div>
			
			
		
			<div class="post lastfive" id="post-9">
				<h2><a href="../../blog/2012/01/11/update-a-foray-into-self-publishing/index.html" rel="bookmark" title="Permanent Link to UPDATE &#8211; A Foray Into Self Publishing">UPDATE &#8211; A Foray Into Self Publishing</a></h2>
				<span class="postmetadata">&nbsp;January 11, 2012 &bull; <a href="../../blog/2012/01/11/update-a-foray-into-self-publishing/index.html#respond">No Comments</a> </span>				   
				<div class="entry">
					<p>A couple about a week ago now, I took advantage of the the promotion days available through Amazon&#8217;s KDP Select program.  I would have to say that their promotion options have made an impact in the number of readers if nothing else.  Over the course of the five days promotion days that that KDP select program allows, where your book is free of charge, <em><a href="http://www.amazon.com/That-Which-is-Nameless-ebook/dp/B005GBEHG6/" target="_blank">That Which is Nameless</a></em> was downloaded 531 times.  Considering that there were no more than 4 or 5 downloads total in the previous 5 months or so, that&#8217;s something  Of course, those were free downloads so I&#8217;m not going to get royalties from those 500 readers.  The best I can hope for there is a few good reviews or some feedback on things I could do better.</p>
<p>Since the free period ended I&#8217;ve seen 3 more downloads.  If nothing else, this means that there are people out there who might actually be interested in reading what I&#8217;m writing.  Now, if only I could find a decent editor!</p>
					<p class="postmetadata">
						Posted in <a href="../../blog/category/writings-fiction/index.html" rel="category tag">Writings - Fiction</a>											</p>
				</div>
			</div>
			
			
		
			<div class="post lastfive" id="post-6">
				<h2><a href="../../blog/2012/01/08/a-foray-into-self-publishing/index.html" rel="bookmark" title="Permanent Link to A Foray Into Self Publishing">A Foray Into Self Publishing</a></h2>
				<span class="postmetadata">&nbsp;January 8, 2012 &bull; <a href="../../blog/2012/01/08/a-foray-into-self-publishing/index.html#respond">No Comments</a> </span>				   
				<div class="entry">
					<p>About a year about I wrote a relatively short novel for the National Novel writing Month.  It was a somewhat grueling, but enjoyable, experience that I would suggest anyone try at least once.  Of course, once you&#8217;ve written the thing, what the heck do you do with it?  So I turned the thing into a mobi and published it on Amazon.  Let&#8217;s see how things go.</p>
<p>&nbsp;</p>
					<p class="postmetadata">
						Posted in <a href="../../blog/category/writings-fiction/index.html" rel="category tag">Writings - Fiction</a>											</p>
				</div>
			</div>
			
			
		
			<div class="post lastfive" id="post-129">
				<h2><a href="../../blog/2009/04/05/converting-2da-files-to-something-more-useful-repost/index.html" rel="bookmark" title="Permanent Link to Converting 2DA Files to Something More Useful &#8211; RePost">Converting 2DA Files to Something More Useful &#8211; RePost</a></h2>
				<span class="postmetadata">&nbsp;April 5, 2009 &bull; <a href="../../blog/2009/04/05/converting-2da-files-to-something-more-useful-repost/index.html#respond">No Comments</a> </span>				   
				<div class="entry">
					<p><em><strong>Note:</strong>This is something I wrote way back in April of 2009 on my blog at kc5vzm.com.  While checking on google analytics, I noticed that the old link was still being referenced and decided that I should probably do something to keep it live, at least for the moment.  So, here you go!</em></p>
<p>A friend of mine mentioned he had problem that I might be able to help him with. He had 575 data files on a somewhat lax format. In fact, the disparities between various data files would seem to indicate that the files were hand written rather than generated using a tool or specialized editor. The large number of file and relative inefficiency of dealing with them in their native formats brings up the question of alternative means to store the data. Said friend happens to be able to talk to a <a href="http://www.mysql.com">MySql</a> database from within the <a href="http://nwn.bioware.com/">Never Winter Nights</a> scripting language. To make a long story short my friend asked for a tool to take his collection of 575 2DA files and convert them into an SQL script which could be loaded into a MySql database. So, that&#8217;s exactly what I gave him.</p>
<p>Besides being a reasonably simple task to accomplish, this project gave me a chance to take a look at a very simple <a href="http://maven.apache.org/">Maven</a> managed build. The request was for a java tool specifically (my first choice for something of this nature would have been PERL) to allow for ease of distribution and portability. C/C++ while reasonably portable if you have a sane build system, compiler, and know a touch about what you are doing require that the end user either be given binaries or have a similar sane build system, compiler, and know what you were attempting to do. PERL, which is significantly more portable and provides a reasonably common runtime environment, has a high barrier to entry on the Windows platform. There are some nice <a href="http://www.activestate.com/activeperl/">commercial installs</a> and a few open source projects, such as <a href="http://strawberryperl.com/">Strawberry PERL</a> or <a href="http://vanillaperl.com/">Vanilla PERL</a>, but that is a little much for the average user. Java, the hulking beast that it is, runs just about anywhere with very little prodding, exists on most Windows based systems and is not very difficult to get on UNIX, and will do most of what was needed.</p>
<p>The goals of this particular project are relatively simple:</p>
<ul>
<li>Convert a valid Bioware 2DA file or directory of files into a reasonable SQL script.</li>
<li>Create appropriate tables within the SQL database to match the contents of the 2DA file.</li>
<li>Create a load script to load data into the created tables.</li>
</ul>
<p>I had a few other things that I would have liked to and still may find a way to pull into the project latter on. Unfortunately, about four hours of the time that I meant to be coding was occupied in the vain attempt to counter act a rather nasty headache. When my head finally did clear up, time constraints left a few of my planed features, a nice &#8216;Wizard&#8217; or &#8216;Druid&#8217; like GUI, laying on the chopping room floor. Besides, command line apps are so much simpler to use in the long run and graphical apps are such a GUI mess. (:wink:)</p>
<p>For those who are terribly interested in seeing some code I will later deny to have written, you can take a look at the <a href="http://git.kc5vzm.com/?p=2daLoader.git;a=summary">git</a> repository. This is barely something that I would consider an alpha. Really and truthfully, it is more of a proof of concept in dire need or refactoring/design to make it more than trivially useful.</p>
<p>The 2DA file specification is available from Bioware via the following <a href="http://nwn.bioware.com/developers/">link</a>, towards the bottom of the page. Unfortunately, the data I was given as an example, does not match the specification very well. The specification states:</p>
<ul>
<li>The first row contains a string specifying the 2DA version, &#8216;2DA V2.0&#8217; for the files I was given.</li>
<li>The second line should contain nothing or an optional &#8216;DEFAULT:&#8217; value clauses to be provided when the requested row does not exist.</li>
<li>The third line contains column names separated by white space with the first column, an index column, ignored. While not explicitly stated, it appears that there must be at least one space to delineate the first column.</li>
<li>From the fourth line each line consists of white space delimited columns.</li>
<li>Values in the data set that contain spaces must be quoted with the &#8216;&#8221;&#8216; character.</li>
<li> &#8216;****&#8217; is treated as a special data value similar to a database null.</li>
<li>The index column is re-indexed by the existing game tools.</li>
</ul>
<p>While significantly simplified, that about covers the relevant parts of the specification. In reality, the data set I was given as a test didn&#8217;t quite match this in several aspects. Here are a few of the more annoying things that I discovered:</p>
<ul>
<li>The furthest right data column appears to be allowed to contain spaces without quoting.</li>
<li>Five &#8216;*&#8217; characters are sometimes used rather than four.</li>
<li>A row containing now column data but an index appears to be ignored.</li>
</ul>
<p>If the data files I was handed are actually used as was described the parsing code used is very lax about data validation. Really and truly, this is more of a curse than anything else. Lack of data validation will lead to more problems in the long run than letting your developers build crappy content files. Real systems have a tendency to be annoying that way.</p>
<p>Parsing out this kind of data is not really all that difficult. Most of the parsing can be handled by the java.lang.String.split function and an amazingly short regular expression. Dealing with quoted strings is a little more difficult and required looping through a character array to parse properly. I&#8217;m pretty sure there is a better way to accomplish that part but, as stated, this code is little better than a proof of concept. Thankfully, none of the data set I was dealing with had any DEFAULT clauses to deal with and this code ignores that feature.</p>
<p>Once the entire dataset for a file is loaded into an internal representation, SQL generation is accomplished via simple string combination with a little sanitizing for the &#8216; character and strange column names (&#8216;%&#8217;). The current implementation takes this one step further and parse a directory of 2DA files, loading them all into memory at one time. This is definitely not an ideal situation and will eventually be corrected. The data set really should be parsed one file at a time to avoid potential issues with memory usage.</p>
<p>Unfortunately, I don&#8217;t have a good way to avoid loading the entirety of a single file right now. The code is attempting to make guesses about data types based on the data it finds in a given column. If all of the data in a column is parsable by Integer.parseInt then the column is considered to be an SQL INTEGER. If all of the data in a column is parsable by Double.paresDouble then that column is considered to be an SQL DECIMAL. If neither of those are true or every value in the column is the special null string then the column is considered to be a VARCHAR with a size equal to the longest value in the column. This is definitely very crude and possibly error prone. It does seem to produce a loadable script with the current test data set though.</p>
<p><em><strong>Note:</strong>For anyone interested in actually using this monstrosity you are perfectly welcome to do so. Just keep in mind that I don&#8217;t make any promises about the quality of this code or the resultant data set. If you do come across a bug, feel free to drop a line to <a href="mailto:emeraldd.chris@gmail.com">emeraldd.chris@gmail.com</a> with <strong>2daLoader</strong> in the subject line and I&#8217;ll see what can be done. A binary version of the file can be downloaded from:<br />
</em><br />
<a href="../../wp-content/uploads/2012/05/2daLoader-1.0-SNAPSHOT-jar-with-dependencies.zip">2daLoader-1.0-SNAPSHOT-jar-with-dependencies</a></p>
<p>Since Jar files are in actuality just crafted zip files, my CMS is currently treating them as zip files. This means that you will need to change the file extension back to .jar when you download the file. I hope to have this little issue corrected sometime soon though.</p>
<p>To run the application, just start a command window and enter a command line similar to this:</p>
<pre class="brush: bash; title: ; notranslate" title="">
 java -jar 2daLoader-1.0-SNAPSHOT.jar &lt;path to directory containing 2da files&gt;
</pre>
<p>After pressing return, you should see a large number of logging lines scrolling by telling more than you ever wanted to know about what the application is doing. Keep in mind, this can take a long time for a large number of files. If it does not work as expected, make sure you have entered the correct file and path names. The current version will produce an output file name <strong>buildSql.sql</strong> in the current directory. One of the things I&#8217;d like to add latter is a means of specifying the output file.</p>
<p>In any event, have fun!</p>
					<p class="postmetadata">
						Posted in <a href="../../blog/category/old-blog/index.html" rel="category tag">Old Blog</a>, <a href="../../blog/category/programming/index.html" rel="category tag">Programming</a>, <a href="../../blog/category/programming/software-archaeology/index.html" rel="category tag">Software Archaeology</a>											</p>
				</div>
			</div>
			
				
		
	<div class="navigation clearfix">
			<div class="left"></div>
		<div class="right"><a href="../7/index.html" >Next Entries <span>&raquo;</span></a></div>
		<div class="clear"></div>
	</div>
	
	</div>
	
	<div id="sidebar">
	<h3>Books - Fiction</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://www.amazon.com/A-Thousand-Cuts-ebook/dp/B00ARIC1GQ" rel="me" title="A young couple finds more than they bargained for in a new home . . . " target="_blank"><img src="../../wp-content/uploads/2012/12/TheFlea150x225.png"  alt="A Thousand Cuts"  title="A young couple finds more than they bargained for in a new home . . . " /></a></li>
<li><a href="https://society6.com/arlaneenalra" rel="me" title="Where you can buy prints and other interesting editions of my paintings.">My Society6 Store</a></li>
<li><a href="http://www.amazon.com/That-Which-is-Nameless-ebook/dp/B005GBEHG6" rel="me" title="There is a somewhere in the middle of nowhere that is everywhere . . ." target="_blank"><img src="../../wp-content/uploads/2012/05/that_which_is_nameless150x225.png"  alt="That Which is Namless"  title="There is a somewhere in the middle of nowhere that is everywhere . . ." /></a></li>
<li><a href="https://www.amazon.com/dp/B07147WSCY" rel="me" title="The Erasable Man" target="_blank"><img src="../../wp-content/uploads/2017/07/Erasableman150x225.jpeg"  alt="The Erasable Man"  title="The Erasable Man" /></a></li>

	</ul>

<h3>Feeds</h3>
	<ul class='xoxo blogroll'>
<li><a href="https://www.instagram.com/arlaneenalra/" rel="me"><img src="../../wp-content/uploads/2017/04/ig_glyph-e1493084832726.png"  alt="Instgram"  /></a></li>

	</ul>

<h3>Interesting Reads</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://necrotictimes.blogspot.com/">Necrotic Times</a></li>

	</ul>

<h3>Ph'nglui mglw'nafh Cthulhu R'lyeh wgah'nagl fhtagn</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://lovecraftzine.com/" title="A free online magazine featuring lovecraftian horror and the cthulhu mythos.">Lovecraft eZine</a></li>

	</ul>

<h3>Podcasts</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://pseudopod.org/" title="&#8220;The world’s premier horror fiction podcast&#8221;" target="_blank">Pseudopod</a></li>

	</ul>

<h3>Writing</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://goodreads.com" title="A place to find out what&#8217;s out there that&#8217;s worth reading!" target="_blank">Goodreads</a></li>
<li><a href="http://litreactor.com" title="An online writing community" target="_blank">Lit Reactor</a></li>
<li><a href="http://www.nanowrimo.org/" title="Give it a shot this November" target="_blank">National Novel Writing Month</a></li>

	</ul>

<h3>Other Stuff</h3>		<ul>
			<li class="page_item page-item-316"><a href="../../zachary-artemas/index.html">Chronicles of Zachary Artemas</a></li>
<li class="page_item page-item-798"><a href="../../confirm-subscription/index.html">Confirm Subscription</a></li>
<li class="page_item page-item-465"><a href="../../my-books-and-stories/index.html">My Books and Stories</a></li>
<li class="page_item page-item-16"><a href="../../index.html?page_id=16">Mysql Backup Script</a></li>
<li class="page_item page-item-539"><a href="../../unix-cli-one-liners/index.html">Unix CLI One-Liners</a></li>
<li class="page_item page-item-552"><a href="../../my-writing-tools/index.html">Writing Tools</a></li>
		</ul>
			<h3>Follow me on Twitter</h3><a class="twitter-timeline" data-height="300" data-theme="dark" data-link-color="#f96e5b" data-border-color="#e8e8e8" data-lang="EN" data-partner="jetpack" data-chrome="transparent" data-widget-id="332933596937592834" href="https://twitter.com/332933596937592834">My Tweets</a>				<h3>Recent Posts</h3>		<ul>
											<li>
					<a href="../../blog/2017/09/26/just-finished-reading-duma-key/index.html">Just Finished Reading &#8211; Duma Key</a>
									</li>
											<li>
					<a href="../../blog/2017/07/29/the-erasable-man-2/index.html">The Erasable Man</a>
									</li>
											<li>
					<a href="../../blog/2017/06/07/the-erasable-man-rc-final/index.html">The Erasable Man RC-Final!</a>
									</li>
											<li>
					<a href="../../blog/2017/06/03/the-erasable-man/index.html">The Erasable Man</a>
									</li>
											<li>
					<a href="../../blog/2017/03/16/some-more-painting/index.html">Some More Painting</a>
									</li>
					</ul>
		<h3>Archives</h3>		<ul>
				<li><a href='../../blog/2017/09/index.html'>September 2017</a></li>
	<li><a href='../../blog/2017/07/index.html'>July 2017</a></li>
	<li><a href='../../blog/2017/06/index.html'>June 2017</a></li>
	<li><a href='../../blog/2017/03/index.html'>March 2017</a></li>
	<li><a href='../../blog/2017/01/index.html'>January 2017</a></li>
	<li><a href='../../blog/2016/12/index.html'>December 2016</a></li>
	<li><a href='../../blog/2016/11/index.html'>November 2016</a></li>
	<li><a href='../../blog/2016/10/index.html'>October 2016</a></li>
	<li><a href='../../blog/2016/06/index.html'>June 2016</a></li>
	<li><a href='../../blog/2016/05/index.html'>May 2016</a></li>
	<li><a href='../../blog/2014/05/index.html'>May 2014</a></li>
	<li><a href='../../blog/2014/04/index.html'>April 2014</a></li>
	<li><a href='../../blog/2014/03/index.html'>March 2014</a></li>
	<li><a href='../../blog/2014/02/index.html'>February 2014</a></li>
	<li><a href='../../blog/2013/12/index.html'>December 2013</a></li>
	<li><a href='../../blog/2013/06/index.html'>June 2013</a></li>
	<li><a href='../../blog/2013/05/index.html'>May 2013</a></li>
	<li><a href='../../blog/2013/04/index.html'>April 2013</a></li>
	<li><a href='../../blog/2013/03/index.html'>March 2013</a></li>
	<li><a href='../../blog/2013/02/index.html'>February 2013</a></li>
	<li><a href='../../blog/2013/01/index.html'>January 2013</a></li>
	<li><a href='../../blog/2012/12/index.html'>December 2012</a></li>
	<li><a href='../../blog/2012/11/index.html'>November 2012</a></li>
	<li><a href='../../blog/2012/10/index.html'>October 2012</a></li>
	<li><a href='../../blog/2012/09/index.html'>September 2012</a></li>
	<li><a href='../../blog/2012/08/index.html'>August 2012</a></li>
	<li><a href='../../blog/2012/07/index.html'>July 2012</a></li>
	<li><a href='../../blog/2012/06/index.html'>June 2012</a></li>
	<li><a href='../../blog/2012/05/index.html'>May 2012</a></li>
	<li><a href='../../blog/2012/04/index.html'>April 2012</a></li>
	<li><a href='../../blog/2012/03/index.html'>March 2012</a></li>
	<li><a href='../../blog/2012/02/index.html'>February 2012</a></li>
	<li><a href='../../blog/2012/01/index.html'>January 2012</a></li>
	<li><a href='../../blog/2009/04/index.html'>April 2009</a></li>
		</ul>
			<h3>Categories</h3>		<ul>
				<li class="cat-item cat-item-15"><a href="../../blog/category/cats/index.html">Cats</a>
</li>
	<li class="cat-item cat-item-12"><a href="../../blog/category/old-blog/index.html">Old Blog</a>
</li>
	<li class="cat-item cat-item-43"><a href="../../blog/category/random-thoughts/painting/index.html">Painting</a>
</li>
	<li class="cat-item cat-item-7"><a href="../../blog/category/programming/index.html">Programming</a>
</li>
	<li class="cat-item cat-item-11"><a href="../../blog/category/random-thoughts/index.html">Random Thoughts</a>
</li>
	<li class="cat-item cat-item-14"><a href="../../blog/category/reading-the-other-half-of-writing/index.html">Reading &#8211; The Other Half of Writing</a>
</li>
	<li class="cat-item cat-item-17"><a href="../../blog/category/writings-fiction/short-stories/index.html">Short Stories</a>
</li>
	<li class="cat-item cat-item-8"><a href="../../blog/category/programming/software-archaeology/index.html">Software Archaeology</a>
</li>
	<li class="cat-item cat-item-9"><a href="../../blog/category/writings-fiction/that-which-is-nameless/index.html">That Which is Nameless</a>
</li>
	<li class="cat-item cat-item-5"><a href="../../blog/category/writings-fiction/the-empty/index.html">The Empty</a>
</li>
	<li class="cat-item cat-item-30"><a href="../../blog/category/writings-fiction/the-erasable-man/index.html">The Erasable Man</a>
</li>
	<li class="cat-item cat-item-40"><a href="../../blog/category/writings-fiction/the-resurrectionist/index.html">The Resurrectionist</a>
</li>
	<li class="cat-item cat-item-1"><a href="../../blog/category/uncategorized/index.html">Uncategorized</a>
</li>
	<li class="cat-item cat-item-41"><a href="../../blog/category/writing-tools/index.html">Writing &#8211; Tools</a>
</li>
	<li class="cat-item cat-item-4"><a href="../../blog/category/writings-fiction/index.html">Writings &#8211; Fiction</a>
</li>
		</ul>
				</div>
</div>

<div class="hr">&nbsp;</div>
<div id="footer">
    <p>Powered by <a href="http://wordpress.org/">WordPress</a>. Theme: ChaoticSoul (v1.4) by <a href="http://avalonstar.com" rel="designer">Bryan Veloso</a> Modifications by: <a href="../../index.html">Chris Salch</a></p>
</div>
</div>

	<div style="display:none">
	</div>
<script type='text/javascript' src='../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.9b'></script>
<script type='text/javascript' src='../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushBash.js?ver=3.0.9b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "https://chrissalch.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.head.appendChild( corecss );
		var themecssurl = "https://chrissalch.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeRDark.css?ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		document.head.appendChild( themecss );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();

	// Infinite scroll support
	if ( typeof( jQuery ) !== 'undefined' ) {
		jQuery( function( $ ) {
			$( document.body ).on( 'post-load', function() {
				SyntaxHighlighter.highlight();
			} );
		} );
	}
</script>
<script type='text/javascript' src='https://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=202038'></script>
<script type='text/javascript' src='../../wp-content/plugins/jetpack/_inc/build/twitter-timeline.min.js?ver=4.0.0'></script>
<script type='text/javascript' src='../../wp-includes/js/wp-embed.min.js?ver=5.2.7'></script>
<script type='text/javascript' src='https://stats.wp.com/e-202038.js' async='async' defer='defer'></script>
<script type='text/javascript'>
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:7.8.1',blog:'37371501',post:'0',tz:'-5',srv:'chrissalch.com'} ]);
	_stq.push([ 'clickTrackerInit', '37371501', '0' ]);
</script>
</body>
</html>
